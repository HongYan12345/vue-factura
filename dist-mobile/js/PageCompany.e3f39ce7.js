import{r as R,b as v,d as N,t as I,u as V,e as O,O as S,o as B,a1 as M,a2 as P,G as L,J as q,f as z,g as J,h as $,j as r,k as i,w as d,l as s,s as c,F as j,q as m}from"./index.8520ca77.js";import{a as H,b as G,g as U}from"./dbFirebase.c19da40e.js";const K={components:{},setup(){const e=R({forma:v("TRANSFERENCIA"),date:v(N().format("DD/MM/YYYY")),num:"",modifica_dato:!1,empresa_name:"",empresa_direccion:"",empresa_telefono:"",empresa_cp:"",empresa_poblation:"",empresa_nif:"",client_name:"",client_direccion:"",client_telefono:"",client_cp:"",client_poblation:"",client_nif:"",client_forma:""}),a=I(e),C=V(),o=O(),{t:A,locale:Y}=S(),_=v([]),u=v(!1),k=()=>{e.modifica_dato=!0},b=()=>{u.value=!0;const n={id:1,name:e.empresa_name,direccion:e.empresa_direccion,telefono:e.empresa_telefono,cp:e.empresa_cp,poblation:e.empresa_poblation,nif:e.empresa_nif};o.state.isVisitor?M(n).then(p=>{e.modifica_dato=!1,u.value=!1}):H("empresa",n.id,n).then(p=>{e.modifica_dato=!1,u.value=!1})},E=()=>{o.state.isVisitor?L().then(n=>{console.log("[PageCompany]empresa en base de dato:",n),n[0]&&(e.empresa_name=n[0].name,e.empresa_telefono=n[0].telefono,e.empresa_direccion=n[0].direccion,e.empresa_cp=n[0].cp,e.empresa_nif=n[0].nif,e.empresa_poblation=n[0].poblation)}):U("empresa").then(n=>{console.log("[PageCompany]empresa en firebase:",n),n[0]&&(e.empresa_name=n[0].name,e.empresa_telefono=n[0].telefono,e.empresa_direccion=n[0].direccion,e.empresa_cp=n[0].cp,e.empresa_nif=n[0].nif,e.empresa_poblation=n[0].poblation)}).catch(n=>{console.error("Error getting data: ",n)})},T=()=>{o.state.isVisitor?q().then(n=>{n.forEach(p=>{_.value.push({value:p.telefono,label:p.telefono+" "+p.name})}),console.log("[PageCompany]list_client en base de dato:",_)}):U("clientes").then(n=>{console.log("[PageCompany]list_client en FireBase:",n),n.forEach(p=>{_.value.push({value:p.telefono,label:p.telefono+" "+p.name})})}).catch(n=>{console.error("Error getting data: ",n)})},y=()=>{console.log("cliente select: ",e.client_name),g(),C.push({name:"table"})},f=()=>{g(),C.back()},D=()=>{console.log("Update",o.state.data_cliente),o.state.data_cliente&&(e.client_name=o.state.data_cliente.name,e.client_direccion=o.state.data_cliente.direccion,e.client_telefono=o.state.data_cliente.telefono,e.client_cp=o.state.data_cliente.cp,e.client_poblation=o.state.data_cliente.poblation,e.client_nif=o.state.data_cliente.nif,e.client_forma=o.state.data_cliente.forma),e.num=o.state.num,e.date=o.state.date,E(),T(),g()},h=(n,p)=>{o.state.isVisitor?P(n).then(l=>{console.log("select dato client en base de dato:",l),l[0]&&(e.client_name=l[0].name,e.client_direccion=l[0].direccion,e.client_telefono=l[0].telefono,e.client_cp=l[0].cp,e.client_poblation=l[0].poblation,e.client_nif=l[0].nif,e.client_forma=l[0].forma)}):G("clientes",n).then(l=>{console.log("select dato client en firebase:",l),e.client_name=l.name,e.client_direccion=l.direccion,e.client_telefono=l.telefono,e.client_cp=l.cp,e.client_poblation=l.poblation,e.client_nif=l.nif,e.client_forma=l.forma}).catch(l=>{console.error("Error getting data: ",l)})},g=()=>{o.commit("saveEmpresa",{name:e.empresa_name,direccion:e.empresa_direccion,telefono:e.empresa_telefono,cp:e.empresa_cp,poblation:e.empresa_poblation,nif:e.empresa_nif}),o.commit("saveNum",{num:e.num,date:e.date,forma:e.forma}),o.commit("saveCliente",{name:e.client_name,direccion:e.client_direccion,telefono:e.client_telefono,cp:e.client_cp,poblation:e.client_poblation,nif:e.client_nif,forma:e.client_forma})},t=()=>N().format("YYYY-MM-DD HH:mm:ss"),w=()=>{console.log(e.forma)},F=()=>{e.num=e.num.replace(/[^0-9]/g,"")};return B(()=>{D()}),{...a,t:A,store:o,clients_list:_,selectCliente:h,modificaDato:k,handleOkDato:b,goTable:y,goBack:f,confirmLoading:u,today:t,validateNumberInput:F,handleChange:w}}},Q={class:"button-container"},W={class:"data_empresa"},X={class:"company_title"},Z=r("br",null,null,-1),x=r("br",null,null,-1),ee={class:"data_empresa"},ne={class:"company_title"},oe=r("br",null,null,-1),ae=r("br",null,null,-1);function te(e,a,C,o,A,Y){const _=m("a-button"),u=m("a-date-picker"),k=m("a-input-number"),b=m("a-radio-button"),E=m("a-radio-group"),T=m("a-space"),y=m("a-select"),f=m("a-input"),D=m("a-modal"),h=m("a-col"),g=m("a-row");return J(),$(j,null,[r("div",Q,[i(_,{onClick:o.goBack,class:"btn-back",size:"large"},{default:d(()=>[c(s(e.$t("back")),1)]),_:1},8,["onClick"]),i(_,{onClick:o.goTable,class:"btn-next",size:"large"},{default:d(()=>[c(s(e.$t("next")),1)]),_:1},8,["onClick"])]),r("div",null,[i(T,{direction:"vertical",size:12},{default:d(()=>[i(u,{value:e.date,"onUpdate:value":a[0]||(a[0]=t=>e.date=t),"value-format":"DD/MM/YYYY",showToday:!1},null,8,["value"]),i(k,{"addon-before":"NÂº",style:{width:"142px"},value:e.num,"onUpdate:value":a[1]||(a[1]=t=>e.num=t),min:1},null,8,["value"]),i(E,{class:"btn-select",value:e.forma,"onUpdate:value":a[2]||(a[2]=t=>e.forma=t),"button-style":"solid",onChange:o.handleChange},{default:d(()=>[i(b,{value:"TRANSFERENCIA"},{default:d(()=>[c("TRANSFERENCIA")]),_:1}),i(b,{value:"EFECTIVO"},{default:d(()=>[c("EFECTIVO")]),_:1}),i(b,{value:"TARJETA"},{default:d(()=>[c("TARJETA")]),_:1})]),_:1},8,["value","onChange"])]),_:1}),r("div",null,[r("a",{onClick:a[3]||(a[3]=(...t)=>o.modificaDato&&o.modificaDato(...t))},[r("div",W,[r("div",X,s(e.empresa_name),1),c(" "+s(e.empresa_direccion)+" ",1),Z,c(" "+s(e.empresa_poblation)+" "+s(e.empresa_cp)+" ",1),x,c(" NIF: "+s(e.empresa_nif)+" TEL: "+s(e.empresa_telefono),1)])])]),i(y,{"show-search":"",placeholder:"Select a person",style:{width:"100%"},options:o.clients_list,onSelect:o.selectCliente},null,8,["options","onSelect"]),r("div",ee,[r("div",ne,s(e.client_name),1),c(" "+s(e.client_direccion)+" ",1),oe,c(" "+s(e.client_poblation)+" "+s(e.client_cp)+" ",1),ae,c(" NIF: "+s(e.client_nif)+" TEL: "+s(e.client_telefono),1)])]),i(g,{gutter:16},{default:d(()=>[i(h,{xs:24,sm:12,md:8,lg:6},{default:d(()=>[i(D,{visible:e.modifica_dato,"onUpdate:visible":a[10]||(a[10]=t=>e.modifica_dato=t),title:"Title","confirm-loading":o.confirmLoading,onOk:o.handleOkDato},{default:d(()=>[c(s(e.$t("name"))+": ",1),i(f,{value:e.empresa_name,"onUpdate:value":a[4]||(a[4]=t=>e.empresa_name=t),spellcheck:"false"},null,8,["value"]),c(" "+s(e.$t("direccion"))+": ",1),i(f,{value:e.empresa_direccion,"onUpdate:value":a[5]||(a[5]=t=>e.empresa_direccion=t),spellcheck:"false"},null,8,["value"]),c(" "+s(e.$t("poblation"))+": ",1),i(f,{value:e.empresa_poblation,"onUpdate:value":a[6]||(a[6]=t=>e.empresa_poblation=t),spellcheck:"false"},null,8,["value"]),c(" "+s(e.$t("cp"))+": ",1),i(f,{value:e.empresa_cp,"onUpdate:value":a[7]||(a[7]=t=>e.empresa_cp=t),spellcheck:"false"},null,8,["value"]),c(" "+s(e.$t("nif"))+": ",1),i(f,{value:e.empresa_nif,"onUpdate:value":a[8]||(a[8]=t=>e.empresa_nif=t),spellcheck:"false"},null,8,["value"]),c(" "+s(e.$t("telefono"))+": ",1),i(f,{value:e.empresa_telefono,"onUpdate:value":a[9]||(a[9]=t=>e.empresa_telefono=t),spellcheck:"false"},null,8,["value"])]),_:1},8,["visible","confirm-loading","onOk"])]),_:1}),i(h,{xs:24,sm:12,md:8,lg:6})]),_:1})],64)}const se=z(K,[["render",te]]);export{se as default};
