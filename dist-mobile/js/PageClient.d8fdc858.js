import{P as N,Q as z,S as F,r as V,t as R,u as q,b as k,e as I,R as L,o as j,T as X,U as G,I as H,f as J,g as b,h,j as v,k as l,w as i,q as r,l as P,s as U,V as K,m as Y,N as Z,W as x,X as $,J as ee,p as E}from"./index.8520ca77.js";import{a as M,d as Q,g as W}from"./dbFirebase.c19da40e.js";const oe={components:{PlusOutlined:N,DeleteOutlined:z,SearchOutlined:F},setup(){const t=V({errorClient:!1,valueClient:"",modifica_articulo:!1,articulo_name:""}),n=R(t),w=q(),o=k(!1),d=k([]),m=k(""),e=I(),g=k(!1),f=()=>{t.modifica_articulo=!0},_=()=>{if(o.value=!0,e.state.isVisitor)X(t.articulo_name).then(a=>{t.modifica_articulo=!1,o.value=!1,t.articulo_name=""});else{const a={name:t.articulo_name};M("articulos",t.articulo_name,a).then(p=>{t.modifica_articulo=!1,o.value=!1,t.articulo_name=""})}u()},S=()=>{d.value=[],e.state.isVisitor?H().then(a=>{console.log("[PageClient]articulo en base de dato:",a),a.forEach(p=>{d.value.push({value:p.name})})}):W("articulos").then(a=>{console.log("[PageClient]articulo en FireBase:",a),a.forEach(p=>{d.value.push({value:p.name})})}).catch(a=>{console.error("Error getting data: ",a)})},C=()=>{w.back()},y=a=>{Q("articulos",a),G(a),u()},A=L(()=>(console.log("s",m),m.value?d.value.filter(a=>a.value.includes(m.value)):d.value)),u=()=>{S()};return j(()=>{u()}),{...n,searchString:m,goBack:C,visible:g,delectArticulo:y,modificaArticulo:f,handleOkArticulo:_,confirmLoading:o,filteredArticulos:A}}},te={class:"item-row"};function le(t,n,w,o,d,m){const e=r("SearchOutlined"),g=r("a-input"),f=r("PlusOutlined"),_=r("a-button"),S=r("DeleteOutlined"),C=r("a-list-item"),y=r("a-list"),A=r("a-modal");return b(),h("div",null,[v("div",null,[l(g,{class:"search-input",placeholder:"Search",value:o.searchString,"onUpdate:value":n[0]||(n[0]=u=>o.searchString=u)},{suffix:i(()=>[l(e)]),_:1},8,["value"])]),v("div",null,[l(_,{onClick:o.modificaArticulo,class:"btn-add",type:"text",block:""},{icon:i(()=>[l(f,{style:{"font-size":"20px"}})]),_:1},8,["onClick"])]),v("div",null,[l(y,{class:"a-list","item-layout":"horizontal","data-source":o.filteredArticulos,locale:{emptyText:" "}},{renderItem:i(({item:u})=>[l(C,null,{default:i(()=>[v("div",te,[v("div",null,P(u.value),1),l(_,{onClick:a=>o.delectArticulo(u.value)},{icon:i(()=>[l(S)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1},8,["data-source"])]),l(A,{visible:t.modifica_articulo,"onUpdate:visible":n[2]||(n[2]=u=>t.modifica_articulo=u),title:"修改产品类型","confirm-loading":o.confirmLoading,onOk:o.handleOkArticulo},{default:i(()=>[l(g,{value:t.articulo_name,"onUpdate:value":n[1]||(n[1]=u=>t.articulo_name=u),spellcheck:"false"},{default:i(()=>[U(P(t.$t("name_producto"))+":",1)]),_:1},8,["value"])]),_:1},8,["visible","confirm-loading","onOk"])])}const ae=J(oe,[["render",le]]),ne={components:{PlusOutlined:N,DeleteOutlined:z,SearchOutlined:F,PageArticulo:ae},setup(){const t=V({errorClient:!1,valueClient:"",modifica_articulo:!1,articulo_name:""}),n=R(t),w=q(),o=k(!1),d=k([]),m=k(""),e=V({name:"",direccion:"",nif:"",forma:"",poblation:"",cp:"",telefono:""}),g=()=>{e.name==""&&e.direccion==""&&e.nif==""&&e.forma==""&&e.poblation==""&&e.cp==""&&e.telefono==""?t.errorClient=!0:(t.errorClient=!1,console.log("submit!",K(e)),Y.success("Submit client success"),u(),C())},f=I(),_=k(!1),S=()=>{_.value=!0,e.name="",e.direccion="",e.nif="",e.forma="",e.poblation="",e.cp="",e.telefono=""},C=()=>{_.value=!1,T()},y=()=>{t.modifica_articulo=!t.modifica_articulo},A=()=>{w.back()},u=()=>{Z();const s={telefono:e.telefono,name:e.name,direccion:e.direccion,poblation:e.poblation,cp:e.cp,nif:e.nif,forma:e.forma};console.log("bd:",s),f.state.isVisitor?x(s):M("clientes",e.telefono,s),e.name="",e.direccion="",e.nif="",e.forma="",e.poblation="",e.cp="",e.telefono=""},a=s=>{Q("clientes",s),$(Number(s)),T()},p=()=>{d.value=[],console.log("[PageClient]show client"),f.state.isVisitor?ee().then(s=>{s.forEach(O=>{d.value.push({value:O,label:O.name+" ,"+O.telefono})}),console.log("lista clients:",d.value)}):W("clientes").then(s=>{console.log("[PageTable]clientes en FireBase:",s),s.forEach(O=>{d.value.push({value:O,label:O.name+" ,"+O.telefono})})}).catch(s=>{console.error("Error getting data: ",s)})},B=L(()=>(console.log("s",m),m.value?d.value.filter(s=>s.label.includes(m.value)):d.value)),c=()=>{console.log(t.valueClient)},D=s=>{_.value=!0,e.name=s.name,e.telefono=s.telefono,e.direccion=s.direccion,e.nif=s.nif,e.poblation=s.poblation,e.cp=s.cp},T=()=>{p()};return j(()=>{p()}),{...n,searchString:m,formState:e,onSubmit:g,goBack:A,showDrawer:S,onClose:C,editCliente:D,visible:_,delectCliente:a,clients:d,modificaArticulo:y,handleChange:c,confirmLoading:o,filteredClients:B}}},ie=v("br",null,null,-1),se={key:0},ce={key:1},re=v("br",null,null,-1),ue={key:2},de={key:3},fe={key:4},me={class:"item-row"},_e=["onClick"],ve={key:5},pe={key:0};function be(t,n,w,o,d,m){const e=r("a-button"),g=r("SearchOutlined"),f=r("a-input"),_=r("PlusOutlined"),S=r("DeleteOutlined"),C=r("a-list-item"),y=r("a-list"),A=r("PageArticulo"),u=r("a-alert"),a=r("a-form-item"),p=r("a-form"),B=r("a-drawer");return b(),h("div",null,[ie,t.modifica_articulo?(b(),h("div",ce,[l(e,{onClick:o.modificaArticulo},{default:i(()=>[U(P(t.$t("modifica_cliente")),1)]),_:1},8,["onClick"])])):(b(),h("div",se,[l(e,{onClick:o.modificaArticulo},{default:i(()=>[U(P(t.$t("modifica_articulo")),1)]),_:1},8,["onClick"])])),re,t.modifica_articulo?E("",!0):(b(),h("div",ue,[l(f,{class:"search-input",placeholder:"Search",value:o.searchString,"onUpdate:value":n[0]||(n[0]=c=>o.searchString=c)},{suffix:i(()=>[l(g)]),_:1},8,["value"])])),t.modifica_articulo?E("",!0):(b(),h("div",de,[l(e,{onClick:o.showDrawer,class:"btn-add",type:"text",block:""},{icon:i(()=>[l(_,{style:{"font-size":"20px"}})]),_:1},8,["onClick"])])),t.modifica_articulo?(b(),h("div",ve,[l(A)])):(b(),h("div",fe,[l(y,{class:"a-list","item-layout":"horizontal","data-source":o.filteredClients,locale:{emptyText:" "}},{renderItem:i(({item:c})=>[l(C,null,{default:i(()=>[v("div",me,[v("a",{class:"item-details",onClick:D=>o.editCliente(c.value)},[v("div",null,P(c.value.name)+" , "+P(c.value.telefono),1)],8,_e),l(e,{onClick:D=>o.delectCliente(c.value.telefono)},{icon:i(()=>[l(S)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1},8,["data-source"])])),l(B,{title:t.$t("cliente"),visible:o.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:o.onClose},{default:i(()=>[t.errorClient?(b(),h("div",pe,[l(u,{message:"错误",type:"error"})])):E("",!0),l(p,{model:o.formState},{default:i(()=>[l(a,{label:t.$t("name")},{default:i(()=>[l(f,{value:o.formState.name,"onUpdate:value":n[1]||(n[1]=c=>o.formState.name=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{label:t.$t("telefono")},{default:i(()=>[l(f,{value:o.formState.telefono,"onUpdate:value":n[2]||(n[2]=c=>o.formState.telefono=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{label:t.$t("direccion")},{default:i(()=>[l(f,{value:o.formState.direccion,"onUpdate:value":n[3]||(n[3]=c=>o.formState.direccion=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{label:t.$t("poblation")},{default:i(()=>[l(f,{value:o.formState.poblation,"onUpdate:value":n[4]||(n[4]=c=>o.formState.poblation=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{label:t.$t("nif")},{default:i(()=>[l(f,{value:o.formState.nif,"onUpdate:value":n[5]||(n[5]=c=>o.formState.nif=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{label:t.$t("cp")},{default:i(()=>[l(f,{value:o.formState.cp,"onUpdate:value":n[6]||(n[6]=c=>o.formState.cp=c),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),l(a,{"wrapper-col":{span:14,offset:4}},{default:i(()=>[l(e,{type:"primary",onClick:o.onSubmit},{default:i(()=>[U(P(t.$t("crear")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible","onClose"])])}const Ce=J(ne,[["render",be]]);export{Ce as default};
